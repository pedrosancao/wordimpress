#!/usr/bin/php
<?php

if (false === $autoload = realpath(__DIR__ . '/../../../autoload.php')) {
    echo "\33[38;5;1mUnable to locate autoload.php\33[0m\n";
    exit(1);
}

require $autoload;

if ($argc < 2 || !class_exists($argv[1])) {
    # TODO error color
    echo "Please provide a valid class name\n";
    exit(1);
}

$site = new $argv[1];
if (!$site instanceof PedroSancao\Wordimpress\Contracts\SiteInterface) {
    # TODO error color
    echo "Provided class must implements PedroSancao\Wordimpress\Contracts\SiteInterface\n";
    exit(1);
}

$generator = new PedroSancao\Wordimpress\Generator($site);
$generator->prepare();
$generator->generate();
